
model User {
  id                String             @id @default(cuid())
  email             String             @unique
  name              String
  role              UserRole
  verificationStatus VerificationStatus @default(PENDING)
  skills           Skill[]
  experiences       Experience[]
  education        Education[]
  leaveRequests   LeaveRequest[]
}

model LeaveRequest {
  id                String             @id @default(cuid())
  userId            String
  
  leaveType         LeaveType
  startDate         DateTime
  endDate           DateTime
  reason            String
  status            LeaveRequestStatus @default(PENDING)
  rejectionReason     String?
  
  // Approval Info
  reviewedBy        String?
  reviewedAt       DateTime?
  
  // Timestamps
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  
  // Relations
  user              User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId])
  @@index([status])
  @@index([startDate])
  @@index([endDate])
}

model Experience {
  id                String             @id @default(cuid())
  userId            String
  title             String
  company           String?
  location          String?
  description       String?
  startDate         DateTime
  endDate           DateTime?
  current           Boolean            @default(false)
  skills            String? // JSON array of skill strings
  
  // Timestamps
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  
  // Relations
  user              User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId])
  @@index([startDate])
  @@index([current])
}

model Education {
  id                String             @id @default(cuid())
  userId            String
  school            String
  degree            String
  field             String?
  description       String?
  startDate         DateTime
  endDate           DateTime
  
  // Timestamps
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  
  // Relations
  user              User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId])
  @@index([startDate])
}

model Vacancy {
  id                String             @id @default(cuid())
  projectId         String
  title             String
  description       String?
  type              EmploymentType @default(FULL_TIME)
  skills            String? // JSON array of skill strings
  slots             Int            @default(1)
  filled            Int            @default(0)
  
  // Timestamps
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  
  // Relations
  project              Project         @relation(fields: [projectId], references: [id], onDelete: Cascade)
  
  @@index([projectId])
  @@index([type])
}

